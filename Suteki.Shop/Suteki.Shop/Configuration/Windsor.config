<?xml version="1.0"?>
<configuration>
  <!-- windsor configuration. 
  This is a web application, all components must have a lifesytle of 'transient' or 'preWebRequest' -->
  <components>

    <!-- repositories -->

    <!-- data context provider (this must have a lifestyle of 'perWebRequest' to allow the same data context
    to be used by all repositories) -->
    <component
      id="datacontextprovider"
      service="Suteki.Common.Repositories.IDataContextProvider, Suteki.Common"
      type="Suteki.Common.Repositories.DataContextProvider, Suteki.Common"
      lifestyle="perWebRequest"
     />

    <component
      id="generic.repository"
      service="Suteki.Common.Repositories.IRepository`1, Suteki.Common"
      type="Suteki.Common.Repositories.Repository`1, Suteki.Common"
      lifestyle="transient" />
    
    <!-- services -->

    <component
      id="httpFile.service"
      service="Suteki.Shop.Services.IHttpFileService, Suteki.Shop"
      type="Suteki.Shop.Services.HttpFileService, Suteki.Shop"
      lifestyle="transient">
    </component>

    <component
      id="image.service"
      service="Suteki.Shop.Services.IImageService, Suteki.Shop"
      type="Suteki.Shop.Services.ImageService, Suteki.Shop"
      lifestyle="transient">
      <parameters>
        <mainHeight>300</mainHeight>
        <mainWidth>300</mainWidth>
        <thumbHeight>100</thumbHeight>
        <thumbWidth>100</thumbWidth>
      </parameters>
    </component>

    <component
      id="size.service"
      service="Suteki.Shop.Services.ISizeService, Suteki.Shop"
      type="Suteki.Shop.Services.SizeService, Suteki.Shop"
      lifestyle="transient">
    </component>

    <component
      id="user.service"
      service="Suteki.Shop.Services.IUserService, Suteki.Shop"
      type="Suteki.Shop.Services.UserService, Suteki.Shop"
      lifestyle="transient">
    </component>

    <component
      id="orderable.service"
      service="Suteki.Common.Services.IOrderableService`1, Suteki.Common"
      type="Suteki.Common.Services.OrderableService`1, Suteki.Common"
      lifestyle="transient" />

    <component
      id="postage.service"
      service="Suteki.Shop.Services.IPostageService, Suteki.Shop"
      type="Suteki.Shop.Services.PostageService, Suteki.Shop"
      lifestyle="transient" />

    <component
      id="encryption.service"
      service="Suteki.Shop.Services.IEncryptionService, Suteki.Shop"
      type="Suteki.Shop.Services.EncryptionService, Suteki.Shop"
      lifestyle="transient">
      <parameters>
        <publicKey>BgIAAACkAABSU0ExAAQAAAEAAQAxbw82AKHy6CaWgDdEjWJJTzpKbvu3p3ugJ9GOI2Kjti5BgJZiqj+D2FC4Km18ZtFrdOrUHlElcylqX8Fr8x52pTPYNgImMDRTG7ft9f8zSAOLxYK6rsTjI3sX8GSVBub10XLj0vdR/4UrPdhTTIx6sewtOZb7M3INBL+bpypjyw==</publicKey>
      </parameters>
    </component>

    <!-- email config -->
    
    <!--
    <component
      id="email.service"
      service="Suteki.Common.Services.IEmailSender, Suteki.Common"
      type="Suteki.Common.Services.EmailSender, Suteki.Common"
      lifestyle="transient">
      <parameters>
        <smtpServer>smtp.sutekishop.co.uk</smtpServer>
        <fromAddress>info@sutekishop.co.uk</fromAddress>
      </parameters>
    </component>
    -->
    
    <component
      id="emailLogger.service"
      service="Suteki.Common.Services.IEmailSender, Suteki.Common"
      type="Suteki.Common.Services.EmailSenderLogger, Suteki.Common"
      lifestyle="transient">
      <parameters>
        <emailSender>${nullemail.service}</emailSender>
      </parameters>
    </component>

    <component
      id="nullemail.service"
      service="Suteki.Common.Services.IEmailSender, Suteki.Common"
      type="Suteki.Common.Services.NullEmailSender, Suteki.Common"
      lifestyle="transient">
    </component>

    <!-- multitenanted configuration -->

    <component
      id="IBaseControllerService:test.jumpthegun.co.uk"
      service="Suteki.Shop.Services.IBaseControllerService, Suteki.Shop"
      type="Suteki.Shop.Services.BaseControllerService, Suteki.Shop"
      lifestyle="transient">
      <parameters>
        <ShopName>Suteki Shop</ShopName>
        <EmailAddress>info@sutekishop.co.uk</EmailAddress>
        <GoogleTrackingCode>UA-1643677-4</GoogleTrackingCode>
        <MetaDescription>Suteki Shop is a new self service eCommerce solution. Search engine optimised and fully customisable</MetaDescription>
        <SiteCss>Site.css</SiteCss>
      </parameters>
    </component>

    <component
      id="IImageFileService:test.jumpthegun.co.uk"
      service="Suteki.Shop.Services.IImageFileService, Suteki.Shop"
      type="Suteki.Shop.Services.ImageFileService, Suteki.Shop"
      lifestyle="transient">
      <parameters>
        <imageFolder>/ProductPhotos/</imageFolder>
      </parameters>
    </component>

    <component
      id="IConnectionStringProvider:test.jumpthegun.co.uk"
      service="Suteki.Common.Repositories.IConnectionStringProvider, Suteki.Common"
      type="Suteki.Common.Repositories.ConnectionStringProvider, Suteki.Common"
      lifestyle="transient">
      <parameters>
        <ConnectionString>Data Source=.\SQLEXPRESS;Initial Catalog=SutekiShop;Integrated Security=True</ConnectionString>
      </parameters>
    </component>

    <component
      id="IBaseControllerService:zanywear.com"
      service="Suteki.Shop.Services.IBaseControllerService, Suteki.Shop"
      type="Suteki.Shop.Services.BaseControllerService, Suteki.Shop"
      lifestyle="transient">
      <parameters>
        <ShopName>Zany Wear</ShopName>
        <EmailAddress>info@zanywear.co.uk</EmailAddress>
        <GoogleTrackingCode>UA-1643677-4</GoogleTrackingCode>
        <MetaDescription>Zanywear make the coolest fashions!</MetaDescription>
        <SiteCss>Zanywear.css</SiteCss>
      </parameters>
    </component>

    <component
      id="IImageFileService:zanywear.com"
      service="Suteki.Shop.Services.IImageFileService, Suteki.Shop"
      type="Suteki.Shop.Services.ImageFileService, Suteki.Shop"
      lifestyle="transient">
      <parameters>
        <imageFolder>/ProductPhotos/</imageFolder>
      </parameters>
    </component>

    <component
      id="IConnectionStringProvider:zanywear.com"
      service="Suteki.Common.Repositories.IConnectionStringProvider, Suteki.Common"
      type="Suteki.Common.Repositories.ConnectionStringProvider, Suteki.Common"
      lifestyle="transient">
      <parameters>
        <ConnectionString>Data Source=.\SQLEXPRESS;Initial Catalog=Zanywear;Integrated Security=True</ConnectionString>
      </parameters>
    </component>

  </components>
  
  <!-- Facilities -->

  <facilities>
    <facility 
      id="loggingfacility" 
      configfile="log4net.config" 
      loggingapi="log4net" 
      type="Castle.Facilities.Logging.LoggingFacility, Castle.Facilities.Logging" />
  </facilities>
  
</configuration>
